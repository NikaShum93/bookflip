<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Teachy Witchy — Живая Книга (Editor)</title>
<style>
  :root{
    --bg1:#151024;
    --bg2:#0e1a16;
    --vio:#9b7cff;   /* фиолетовый неон */
    --mint:#63f0c2;  /* мятный неон */
    --ink:#eaf3ff;
    --glass: rgba(255,255,255,.06);
    --glass-2: rgba(255,255,255,.10);
    --stroke: rgba(255,255,255,.16);
  }

  /* магический фон + лёгкое свечение */
  html,body{
    height:100%; margin:0;
    background:
      radial-gradient(1200px 800px at 14% 8%, rgba(155,124,255,.18), transparent 60%),
      radial-gradient(1400px 1000px at 86% 86%, rgba(99,240,194,.14), transparent 60%),
      linear-gradient(135deg, var(--bg1), var(--bg2));
    color: var(--ink);
    font: 16px/1.45 Inter, system-ui, Segoe UI, Roboto, Arial;
  }

  /* плавающие светлячки */
  .fireflies{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:0}
  .fireflies span{
    position:absolute;width:6px;height:6px;border-radius:50%;
    background:radial-gradient(circle,#d8ffe9 0%, rgba(216,255,233,.18) 60%, transparent 70%);
    box-shadow:
      0 0 12px 4px rgba(140,255,214,.55),
      0 0 26px 10px rgba(155,124,255,.22);
    animation:fly linear infinite, twinkle 2.7s ease-in-out infinite;
    opacity:.85; filter: drop-shadow(0 0 4px #8e79ff);
  }
  @keyframes twinkle { 50%{ transform: scale(1.35) } }
  @keyframes fly {
    0%   { transform: translate3d(var(--x0), var(--y0), 0) }
    100% { transform: translate3d(var(--x1), var(--y1), 0) }
  }

  .wrap{position:relative; z-index:1; max-width:980px; margin:34px auto; padding:0 16px}
  h1{margin:0 0 16px; display:flex; align-items:center; gap:12px; letter-spacing:.2px}
  .brand{
    font-weight:900; font-size:22px;
    background:linear-gradient(90deg,var(--vio),var(--mint));
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow: 0 0 18px rgba(155,124,255,.28), 0 0 24px rgba(99,240,194,.18);
  }
  .badge{
    font-size:12px; font-weight:700; padding:.3rem .7rem; border-radius:999px;
    color:#081015; background:linear-gradient(90deg,var(--vio),var(--mint));
    box-shadow:0 6px 18px rgba(155,124,255,.28), 0 6px 22px rgba(99,240,194,.18);
  }

  .card{
    background:linear-gradient(180deg,var(--glass),var(--glass-2));
    border:1px solid var(--stroke);
    border-radius:18px; padding:18px;
    box-shadow: 0 24px 68px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.06);
    backdrop-filter: blur(10px);
  }

  .mini{font-weight:800; font-size:12px; letter-spacing:.12em; text-transform:uppercase; color:#c7c0ff; margin:6px 0 6px}
  label{font-size:13px; opacity:.85}

  textarea, input[type="number"]{
    width:100%; box-sizing:border-box; border-radius:12px;
    border:1px solid rgba(255,255,255,.18);
    background:rgba(6,8,12,.35); color:var(--ink); padding:12px; outline:none;
  }
  textarea{min-height:140px; resize:vertical}

  .row{display:grid; grid-template-columns:1fr 1fr; gap:14px}
  @media (max-width:840px){ .row{ grid-template-columns:1fr } }

  .grid-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px}

  .switch{display:flex; align-items:center; gap:10px; margin-top:8px}
  .switch input{width:18px; height:18px}

  .hint{font-size:12px; opacity:.75; margin-top:6px}

  .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
  .btn{
    appearance:none; border:none; border-radius:12px; padding:11px 14px; cursor:pointer; font-weight:800;
    color:#0e1020;
    background:linear-gradient(90deg,var(--vio),var(--mint));
    box-shadow:0 8px 24px rgba(99,240,194,.25), 0 3px 10px rgba(155,124,255,.25);
  }
  .btn.ghost{background:transparent;color:#e9ecf6;border:1px solid rgba(255,255,255,.22)}
  .btn.small{padding:8px 10px; font-size:13px}

  .pill{
    background:rgba(155,124,255,.14);
    border:1px solid rgba(155,124,255,.35);
    padding:.28rem .65rem; border-radius:999px; font-size:12px
  }
  .ok{color:#b8ffe0}
  .warn{color:#ffe2b8}

  .out{margin-top:16px}
  pre{
    white-space:pre-wrap; word-break:break-word;
    background:rgba(0,0,0,.35); border:1px dashed rgba(255,255,255,.2);
    padding:12px; border-radius:12px
  }
  .copy-row{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin:6px 0 14px}
</style>
</head>
<body>
<div class="fireflies" id="fx"></div>

<div class="wrap">
  <h1><span class="brand">Живая Книга</span> <span class="badge">Teachy Witchy</span></h1>

  <div class="card">
    <div class="mini">1) Изображения страниц</div>
    <label>Ссылки (каждая с новой строки, обложка — первая, задник — последняя)</label>
    <textarea id="urls" placeholder="https://.../page-01.png
https://.../page-02.png
https://.../page-03.png"></textarea>

    <div class="row" style="margin-top:10px">
      <div>
        <div class="mini">2) Размер одной страницы (px)</div>
        <div class="grid-3">
          <div><label>Ширина (w)</label><input id="w" type="number" value="600" min="200" step="1"/></div>
          <div><label>Высота (h)</label><input id="h" type="number" value="900" min="200" step="1"/></div>
          <div>
            <label>&nbsp;</label>
            <button class="btn ghost" id="safeBtn" type="button" title="Подогнать к безопасному размеру с сохранением пропорций">Сделать безопасным</button>
          </div>
        </div>

        <!-- НОВОЕ: внутренний зазор -->
        <div style="margin-top:10px">
          <label>Внутренний зазор вокруг книги (pad, px)</label>
          <input id="pad" type="number" value="24" min="0" step="1"/>
          <div class="hint">Добавляет «воздух» для теней и анимации без padding/масштаба. 0 — без зазора.</div>
        </div>

        <div class="hint">Безопасно: ширина книги (2×w) ≤ <b>1800</b>, h ≤ <b>1200</b>. Формат остаётся прежним.</div>
      </div>
      <div>
        <div class="mini">3) Анимация и звук</div>
        <label>Скорость перелистывания, мс</label>
        <input id="flip" type="number" value="800" min="200" step="50"/>
        <div class="switch">
          <input id="sound" type="checkbox" checked/>
          <label for="sound">Воспроизводить звук перелистывания</label>
        </div>
        <div class="switch">
          <input id="hint" type="checkbox"/>
          <label for="hint">Подсказки «листай» (showHint)</label>
        </di
